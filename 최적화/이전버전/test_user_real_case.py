#!/usr/bin/env python3
"""사용자 실제 케이스 분석"""

from search_optimizer import SearchOptimizer

# 사용자가 보여준 결과 (AI 처리 후)
result_text = """여성헤어라인 모발이식 관해서 관심이 생겨서 조언 구하러 왔어요.
사실 저는 갱년기 증세로 많이 힘들어하던 중에 우연히 알게 되었어요.
이거라는 걸 처음 들어봐서 진짜 변화가 있을지 궁금해요.

요즘 갑자기 얼굴이 화끈거리고 밤에 잠도 못 자서 너무 피곤해요.
감정 기복도 심해져서 별것 아닌 일에도 짜증이 나고,
나이 들어간다는 생각에 우울하기까지 해요.

여성 관련 보는 곳에서 호르몬 관리 안내도 받아봤는데,
암 위험 같은 신체 반응이 무서워서 시작을 못하겠더라고요.
석류즙이나 칡즙도 꾸준히 먹어봤지만 별 변화를 못 봤고,
비싼 한약은 금액 부담 때문에 중단했어요."""

print("=" * 80)
print("사용자가 받은 결과 분석")
print("=" * 80)

print("\n❌ 문제가 되는 표현들:\n")

problems = [
    ("이거라는 걸", "키워드가 '이거'로 과도하게 대체됨"),
    ("여성 관련 보는 곳에서", "'병원'이 이상하게 치환됨 - 완전히 말이 안 됨"),
    ("호르몬 관리 안내도", "'상담' → '안내'로 치환 - 어색함"),
    ("신체 반응", "'부작용' → '신체 반응' - 의학 논문 같음"),
    ("변화가 있을지", "'효과' → '변화' - 단독 사용 시 어색"),
]

for expr, reason in problems:
    if expr in result_text:
        print(f"✓ \"{expr}\" 발견")
        print(f"  → {reason}\n")

print("\n" + "=" * 80)
print("근본 원인 분석")
print("=" * 80)

print("""
1. 키워드 대체 너무 공격적
   - 키워드 출현 감소 로직이 너무 많이 대체
   - "이거", "이런 거" 남발

2. 금칙어 치환이 문맥 무시
   - "병원" → "여성 관련 보는 곳" (???)
   - 이건 말이 안 됨

3. AI가 제대로 수정 안 함
   - AI 프롬프트가 "원본 유지"만 하고 어색한 부분 안 고침
   - 또는 AI를 안 썼을 가능성
""")

print("\n" + "=" * 80)
print("해결 방법")
print("=" * 80)

print("""
1. 키워드 대체 로직 수정 필요
   - "이거", "이런 거" 사용 줄이기
   - 키워드를 2-3회 정도만 남기기

2. 금칙어 대체어 재점검
   - "병원"이 뭘로 치환되는지 확인
   - 문맥에 맞지 않는 대체어 제거

3. AI 프롬프트 강화
   - 어색한 표현을 반드시 고치도록
   - "여성 관련 보는 곳" 같은 표현 금지
""")
